{% extends 'layout.html' %}

{% block content %}

<form class="well span8 offset2 resource-form" action="{{ url_for('resource.new') }}" method='post' enctype="multipart/form-data">
    {% from 'import/tools.html' import flashed_msg,error %}

    <h3 class="alert alert-info">传资源</h3>

    {{ form.hidden_tag() }}
    {{ form.csrf }}

    {{ form.title.label }}
    {{ form.title(class="text") }}
    {{ error(form.errors['title']) }}
    <span class="help-block">资源的主题</span>

    <label>文件*</label>
    <input name="files" type="file" multiple>
    {{ error(form.errors['files']) }}
    <span class="help-block">资源文件，可选择多个文件，总大小不能多于5M</span>

    {{ form.desc.label }}
    {{ form.desc(rows=10) }}
    {{ error(form.errors['desc']) }}
    <span class="help-block">资源的详细介绍</span>

    {{ form.tags.label }}
    {{ form.tags(id='tag-search') }}
    {{ error(form.errors['tags']) }}
    <script>
        $(function(){
            textbox({
                element: '#tag-search',
                placeholder: '搜索：标签',
                url: "{{ url_for('tag.obj') }}",
                format: tag_format
            });
        });
    </script>
    
    <hr>
    <input class="submit btn btn-primary" type="submit" value="上传"/>
</form>
{% endblock %}
