{% extends 'layout.html' %}

{% block nav %}
{{ nav('user', current_user) }}
{% endblock %}

{% block content %}

{% from 'import/topic.html' import normal_question %}
{% from 'import/resource.html' import normal_resource %}
<section id="tag-news" class="span8">
<header class="tabs">
    <ul class="nav nav-pills border-medium">
        <li class="active">
            <a href="#followed" data-toggle="tab">我关注的</a>
        </li>
        <li>
            <a href="#my" data-toggle="tab">我参与的</a>
        </li>
        <li>
            <a href="#latest" data-toggle="tab">随便看看</a>
        </li>
    </ul>
</header>

<div class="tab-content">
    <div class="tab-pane active" id="followed">
        {% for q in followed_qs %}
            {{ normal_question(q, current_user) }}
        <hr>
        {% endfor %}
        
        {% for r in followed_rs %}
            {{ normal_resource(r, current_user) }}
        <hr>
        {% endfor %}
    </div>
    
    <div class="tab-pane" id="my">
        {% for q in my_qs %}
            {{ normal_question(q, current_user) }}
        <hr>
        {% endfor %}
        {% for r in my_rs %}
            {{ normal_resource(r, current_user) }}
        <hr>
        {% endfor %}
    </div>
    <div class="tab-pane" id="latest">
        {% for q in latest_qs %}
            {% if q.user_id != current_user.id %}
            {{ normal_question(q, current_user) }}
            <hr>
            {% endif %}
        {% endfor %}
        {% for r in latest_rs %}
            {% if r.user_id != current_user.id %}
            {{ normal_resource(r, current_user) }}
            <hr>
            {% endif %}
        {% endfor %}
    </div>
</div>
</section>

<section class="span4">

{% from 'import/user.html' import user_info %}

{{ user_info(current_user) }}

<hr>

<section class="fav-tags side-box thumbnail clearfix">
    <header class="border-small"><h5>珍藏的标签</h5></header>
    <p class="simple-p">
        {% for tf in current_user.tag_follows %}
        <a class="tag" href="{{ url_for('tag.index', tag=tf.tag) }}"><span class="label label-info">{{ tf.tag }}</span></a>
        {% endfor %}
    </p>
</section>

</section>

{% endblock %}
